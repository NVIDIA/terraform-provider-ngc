---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ngc_cloud_function Resource - ngc"
subcategory: ""
description: |-
  Nvidia Cloud Function Resource
---

# ngc_cloud_function (Resource)

Nvidia Cloud Function Resource

## Example Usage

```terraform
resource "ngc_cloud_function" "helm_based_cloud_function_example" {
  function_name           = "terraform-cloud-function-resource-example-helm"
  helm_chart              = "https://helm.ngc.nvidia.com/shhh2i6mga69/devinfra/charts/inference-test-0.1.tgz"
  helm_chart_service_name = "entrypoint"
  inference_port          = 8000
  inference_url           = "/echo"
  api_body_format         = "CUSTOM"
  deployment_specifications = [
    {
      configuration           = "{\"image\":{\"repository\":\"nvcr.io/shhh2i6mga69/devinfra/fastapi_echo_sample\",\"tag\":\"latest\"}}",
      backend                 = "dgxc-forge-az33-prd1"
      instance_type           = "DGX-CLOUD.GPU.L40_1x"
      gpu_type                = "L40"
      max_instances           = 1
      min_instances           = 1
      max_request_concurrency = 1
    }
  ]
  health = {
    uri                  = "/health"
    port                 = 8000
    expected_status_code = 200
    timeout              = "PT10S"
    protocol             = "HTTP"
  }
  tags = [
    "test"
  ]
  keep_failed_resource = true
  timeouts = {
    create = "10m"
  }
}

resource "ngc_cloud_function" "helm_based_cloud_function_example_version" {
  function_name           = ngc_cloud_function.helm_based_cloud_function_example.function_name
  function_id             = ngc_cloud_function.helm_based_cloud_function_example.id
  helm_chart              = "https://helm.ngc.nvidia.com/shhh2i6mga69/devinfra/charts/inference-test-0.1.tgz"
  helm_chart_service_name = "entrypoint"
  inference_port          = 8000
  inference_url           = "/echo"
  api_body_format         = "CUSTOM"
  deployment_specifications = [
    {
      configuration           = "{\"image\":{\"repository\":\"nvcr.io/shhh2i6mga69/devinfra/fastapi_echo_sample\",\"tag\":\"latest\"}}",
      backend                 = "dgxc-forge-az33-prd1"
      instance_type           = "DGX-CLOUD.GPU.L40_1x"
      gpu_type                = "L40"
      max_instances           = 1
      min_instances           = 1
      max_request_concurrency = 1
    }
  ]
  health = {
    uri                  = "/health"
    port                 = 8000
    expected_status_code = 200
    timeout              = "PT10S"
    protocol             = "HTTP"
  }
}

resource "ngc_cloud_function" "container_based_cloud_function_example" {
  function_name   = "terraform-cloud-function-resource-example-container"
  container_image = "nvcr.io/shhh2i6mga69/devinfra/fastapi_echo_sample:latest"
  inference_port  = 8000
  inference_url   = "/echo"
  api_body_format = "CUSTOM"
  deployment_specifications = [
    {
      backend                 = "dgxc-forge-az33-prd1"
      instance_type           = "DGX-CLOUD.GPU.L40_1x"
      gpu_type                = "L40"
      max_instances           = 1
      min_instances           = 1
      max_request_concurrency = 1
    }
  ]
  container_environment = [
    {
      key   = "mock1",
      value = "mock2"
    },
    {
      key   = "mock3",
      value = "mock4"
    },
    {
      key   = "mock5",
      value = "mock6"
    }
  ]
  health = {
    uri                  = "/health"
    port                 = 8000
    expected_status_code = 200
    timeout              = "PT10S"
    protocol             = "HTTP"
  }
  tags = [
    "test"
  ]
}

resource "ngc_cloud_function" "container_based_cloud_function_example_version" {
  function_name   = ngc_cloud_function.container_based_cloud_function_example.function_name
  function_id     = ngc_cloud_function.container_based_cloud_function_example.id
  container_image = "nvcr.io/shhh2i6mga69/devinfra/fastapi_echo_sample:latest"
  inference_port  = 8000
  inference_url   = "/echo"
  health_uri      = "/health"
  api_body_format = "CUSTOM"
  deployment_specifications = [
    {
      backend                 = "dgxc-forge-az33-prd1"
      instance_type           = "DGX-CLOUD.GPU.L40_1x"
      gpu_type                = "L40"
      max_instances           = 1
      min_instances           = 1
      max_request_concurrency = 1
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `function_name` (String) Function name
- `inference_url` (String) Service endpoint Path.

### Optional

- `api_body_format` (String) API Body Format. Default is "CUSTOM"
- `container_args` (String) Args to be passed when launching the container
- `container_environment` (Attributes List) (see [below for nested schema](#nestedatt--container_environment))
- `container_image` (String) Container image uri
- `deployment_specifications` (Attributes List) (see [below for nested schema](#nestedatt--deployment_specifications))
- `description` (String) Description of the function
- `function_id` (String) Function ID
- `function_type` (String) Optional function type, used to indicate a STREAMING function. Defaults is "DEFAULT".
- `health` (Attributes) (see [below for nested schema](#nestedatt--health))
- `health_uri` (String, Deprecated) Service health endpoint Path. Default is "/v2/health/ready"
- `helm_chart` (String) Helm chart registry uri
- `helm_chart_service_name` (String) Target service name
- `inference_port` (Number) Target port, will be service port or container port base on function-based
- `keep_failed_resource` (Boolean) Don't delete failed resource. Default is "false"
- `models` (Attributes List) (see [below for nested schema](#nestedatt--models))
- `resources` (Attributes List) (see [below for nested schema](#nestedatt--resources))
- `tags` (Set of String) Tags of the function.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) Read-only Function ID
- `nca_id` (String) NCA ID
- `version_id` (String) Function Version ID

<a id="nestedatt--container_environment"></a>
### Nested Schema for `container_environment`

Required:

- `key` (String) Container environment key
- `value` (String) Container environment value


<a id="nestedatt--deployment_specifications"></a>
### Nested Schema for `deployment_specifications`

Required:

- `gpu_type` (String) GPU Type, GFN backend default is L40
- `instance_type` (String) NVCF Backend Instance Type.
- `max_instances` (Number) Max Instances Count
- `max_request_concurrency` (Number) Max Concurrency Count
- `min_instances` (Number) Min Instances Count

Optional:

- `backend` (String) NVCF Backend.
- `configuration` (String) Will be the json definition to overwrite the existing values.yaml file when deploying Helm-Based Functions


<a id="nestedatt--health"></a>
### Nested Schema for `health`

Required:

- `expected_status_code` (Number) Expected return status code considered as successful
- `port` (Number) Port number where the health listener is running
- `protocol` (String) HTTP/gPRC protocol type for health endpoint
- `timeout` (String) ISO 8601 duration string in PnDTnHnMn.nS format
- `uri` (String) Health endpoint for the container or the helmChart


<a id="nestedatt--models"></a>
### Nested Schema for `models`

Required:

- `name` (String) Artifact name
- `uri` (String) Artifact URI
- `version` (String) Artifact version


<a id="nestedatt--resources"></a>
### Nested Schema for `resources`

Required:

- `name` (String) Artifact name
- `uri` (String) Artifact URI
- `version` (String) Artifact version


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
